<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WebSurf AI</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="sidebar-container">
    <!-- Menu Dropdown (Outside everything for z-index) -->
    <div id="menuDropdown" class="menu-dropdown" style="display: none;">
      <!-- Mode Selector in Menu -->
      <div class="menu-mode-selector">
        <label>Mode:</label>
        <select id="agentMode" class="mode-select">
          <option value="auto">Auto</option>
          <option value="talk">Talk</option>
          <option value="rag">RAG</option>
        </select>
      </div>
      <div class="dropdown-divider"></div>
      <button class="menu-item" id="menuSettingsBtn">
        <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor">
          <path d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z"/>
        </svg>
        <span>Settings</span>
      </button>
      <button class="menu-item menu-item-danger" id="menuLogoutBtn">
        <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z" clip-rule="evenodd"/>
        </svg>
        <span>Logout</span>
      </button>
    </div>

    <!-- Header -->
    <div class="sidebar-header">
      <!-- Menu Button -->
      <button id="menuBtn" class="btn-icon menu-btn hidden" title="Menu">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </button>
      
      <!-- Logo and Title -->
      <div class="header-center">
        <div class="logo-container">
          <div class="logo-icon">
            <span style="font-size: 28px; line-height: 1;">‚ú®</span>
          </div>
          <h1 class="logo-text">WebSurf AI</h1>
        </div>
        <p class="tagline">Your intelligent browsing companion</p>
      </div>
      
      <!-- Header actions - Plus button for new chat -->
      <div class="header-actions">
        <button id="newChatBtn" class="btn-icon" title="New Chat">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="12" y1="5" x2="12" y2="19"></line>
            <line x1="5" y1="12" x2="19" y2="12"></line>
          </svg>
        </button>
      </div>
    </div>

    <!-- Auth Container -->
    <div id="authContainer" class="auth-container">
      <!-- Login Form -->
      <div id="loginForm" class="auth-form active">
        <h2>Welcome Back</h2>
        <p class="form-subtitle">Sign in to continue your AI-powered browsing</p>
        
        <form id="loginFormElement">
          <div class="form-group">
            <label for="loginUsername">Username</label>
            <input type="text" id="loginUsername" name="username" required placeholder="Enter your username">
          </div>
          
          <div class="form-group">
            <label for="loginPassword">Password</label>
            <input type="password" id="loginPassword" name="password" required placeholder="Enter your password">
          </div>
          
          <div id="loginError" class="error-message"></div>
          
          <button type="submit" class="btn btn-primary" id="loginBtn">
            <span class="btn-text">Sign In</span>
            <span class="btn-loader"></span>
          </button>
        </form>
        
        <div class="form-footer">
          <p>Don't have an account? <a href="#" id="showSignup">Sign up</a></p>
        </div>
      </div>

      <!-- Signup Form -->
      <div id="signupForm" class="auth-form">
        <h2>Create Account</h2>
        <p class="form-subtitle">Join WebSurf AI for intelligent browsing</p>
        
        <form id="signupFormElement">
          <div class="form-group">
            <label for="signupUsername">Username</label>
            <input type="text" id="signupUsername" name="username" required placeholder="Choose a username">
          </div>
          
          <div class="form-group">
            <label for="signupName">Full Name</label>
            <input type="text" id="signupName" name="name" required placeholder="Enter your full name">
          </div>
          
          <div class="form-group">
            <label for="signupEmail">Email</label>
            <input type="email" id="signupEmail" name="email" required placeholder="your@email.com">
          </div>
          
          <div class="form-group">
            <label for="signupPassword">Password</label>
            <input type="password" id="signupPassword" name="password" required placeholder="Create a strong password">
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="signupAge">Age</label>
              <input type="number" id="signupAge" name="age" required placeholder="Age">
            </div>
            
            <div class="form-group">
              <label for="signupGender">Gender</label>
              <select id="signupGender" name="gender" required>
                <option value="">Select</option>
                <option value="male">Male</option>
                <option value="female">Female</option>
                <option value="other">Other</option>
              </select>
            </div>
          </div>
          
          <div class="form-group">
            <label for="signupLocation">Location</label>
            <input type="text" id="signupLocation" name="location" required placeholder="City, Country">
          </div>
          
          <div class="form-group">
            <label for="signupApiKey">API Key (Optional)</label>
            <input type="text" id="signupApiKey" name="api_key" placeholder="Enter your API key">
          </div>
          
          <div id="signupError" class="error-message"></div>
          
          <button type="submit" class="btn btn-primary" id="signupBtn">
            <span class="btn-text">Create Account</span>
            <span class="btn-loader"></span>
          </button>
        </form>
        
        <div class="form-footer">
          <p>Already have an account? <a href="#" id="showLogin">Sign in</a></p>
        </div>
      </div>
    </div>

    <!-- Dashboard (Hidden initially) -->
    <div id="dashboard" class="dashboard" style="display: none;">
      <!-- User Info (Hidden, only for storing data) -->
      <div class="user-info" style="display: none;">
        <div class="user-avatar" id="userAvatar"></div>
        <div class="user-details">
          <h3 id="userName">Loading...</h3>
        </div>
      </div>

      <!-- Chat Container -->
      <div class="chat-container">
        <!-- Chat Messages -->
        <div id="chatMessages" class="chat-messages">
          <div class="welcome-message">
            <div class="welcome-icon">‚ú®</div>
            <h3>Ready to Surf the Waves of Knowledge?</h3>
            <p>Start a conversation or attach a document with <kbd style="padding: 2px 6px; background: var(--bg-elevated); border-radius: 4px; font-size: 11px; margin: 0 2px;">@</kbd> to dive deep</p>
            <div style="display: flex; gap: 8px; justify-content: center; margin-top: 16px; flex-wrap: wrap;">
              <span style="padding: 6px 12px; background: linear-gradient(135deg, rgba(232, 185, 35, 0.1), rgba(232, 185, 35, 0.05)); border-radius: 8px; font-size: 11px; border: 1px solid rgba(232, 185, 35, 0.2); transition: transform 0.2s;">üèÑ Wave-Smart AI</span>
              <span style="padding: 6px 12px; background: linear-gradient(135deg, rgba(210, 105, 30, 0.1), rgba(210, 105, 30, 0.05)); border-radius: 8px; font-size: 11px; border: 1px solid rgba(210, 105, 30, 0.2); transition: transform 0.2s;">üìÑ Deep Dive Docs</span>
              <span style="padding: 6px 12px; background: linear-gradient(135deg, rgba(128, 128, 0, 0.1), rgba(128, 128, 0, 0.05)); border-radius: 8px; font-size: 11px; border: 1px solid rgba(128, 128, 0, 0.2); transition: transform 0.2s;">‚ö° Auto-Pilot Ready</span>
            </div>
          </div>
        </div>

        <!-- Attachment Preview -->
        <div id="attachmentPreview" class="attachment-preview" style="display: none;">
          <div class="attachment-info">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
              <path d="M14 4.5V14a2 2 0 01-2 2H4a2 2 0 01-2-2V2a2 2 0 012-2h5.5L14 4.5zm-3 0A1.5 1.5 0 019.5 3V1H4a1 1 0 00-1 1v12a1 1 0 001 1h8a1 1 0 001-1V4.5h-2z"/>
            </svg>
            <span id="attachmentName">document.pdf</span>
            <span id="attachmentType" class="attachment-type">PDF</span>
          </div>
          <button id="removeAttachment" class="btn-remove">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
              <path d="M4.646 4.646a.5.5 0 01.708 0L8 7.293l2.646-2.647a.5.5 0 01.708.708L8.707 8l2.647 2.646a.5.5 0 01-.708.708L8 8.707l-2.646 2.647a.5.5 0 01-.708-.708L7.293 8 4.646 5.354a.5.5 0 010-.708z"/>
            </svg>
          </button>
        </div>

        <!-- Input Area -->
        <div class="chat-input-container">
          <textarea 
            id="chatInput" 
            class="chat-input" 
            placeholder="Type your message or @ to attach..." 
            rows="1"
          ></textarea>
          
          <button id="sendBtn" class="btn-send" disabled>
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="22" y1="2" x2="11" y2="13"></line>
              <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
            </svg>
          </button>
        </div>
      </div>

      <!-- Attachment Menu -->
      <div id="attachmentMenu" class="attachment-menu" style="display: none;">
        <button class="attachment-option" data-type="text">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
            <path d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm1 2h10v2H5V5zm0 4h10v2H5V9zm0 4h6v2H5v-2z"/>
          </svg>
          <span>Enter Text</span>
        </button>
        <button class="attachment-option" data-type="url">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
            <path d="M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"/>
            <path d="M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"/>
          </svg>
          <span>PDF URL</span>
        </button>
        <button class="attachment-option" data-type="file">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
            <path d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm0 2h4v10H4V5zm6 0h6v10h-6V5z"/>
          </svg>
          <span>Upload PDF</span>
        </button>
      </div>

      <!-- Hidden file input -->
      <input type="file" id="fileInput" accept=".pdf" style="display: none;">
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal" style="display: none;">
      <div class="modal-content settings-modal">
        <div class="modal-header">
          <h2>Settings</h2>
          <button id="closeSettings" class="btn-close">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
            </svg>
          </button>
        </div>
        <div class="modal-body">
          <!-- Profile Section -->
          <div class="settings-section">
            <div class="section-header">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                <path d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"/>
              </svg>
              <h3>Profile</h3>
            </div>
            <div class="profile-form">
              <div class="form-group">
                <label>Username</label>
                <input type="text" id="settingsUsername" readonly disabled>
              </div>
              <div class="form-group">
                <label>Full Name</label>
                <input type="text" id="settingsName" placeholder="Your full name">
              </div>
              <div class="form-row">
                <div class="form-group">
                  <label>Age</label>
                  <input type="number" id="settingsAge" placeholder="Age">
                </div>
                <div class="form-group">
                  <label>Gender</label>
                  <select id="settingsGender">
                    <option value="">Select</option>
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                    <option value="other">Other</option>
                  </select>
                </div>
              </div>
              <div class="form-group">
                <label>Location</label>
                <input type="text" id="settingsLocation" placeholder="City, Country">
              </div>
              <div id="settingsError" class="error-message"></div>
              <div id="settingsSuccess" class="success-message" style="display: none;"></div>
              <button id="updateProfileBtn" class="btn btn-primary">
                <span class="btn-text">Save Changes</span>
                <span class="btn-loader"></span>
              </button>
            </div>
          </div>
          
          <!-- Logout Section -->
          <div class="settings-section logout-section">
            <div class="section-header">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M3 3a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1V4a1 1 0 00-1-1H3zm5 4a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1zm0 4a1 1 0 011-1h6a1 1 0 110 2H9a1 1 0 01-1-1z" clip-rule="evenodd"/>
              </svg>
              <h3>Account</h3>
            </div>
            <button id="logoutBtn" class="btn btn-danger">
              <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z" clip-rule="evenodd"/>
              </svg>
              <span>Logout</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="config.js"></script>
  <script src="auth.js"></script>
  <script src="chat.js"></script>
</body>
</html>